<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hello email!</title>
  </head>
  <body>
    <form class="contact-form">
      <input
        type="email"
        name="email"
        class="contact-form__input contact-form__input--email"
        placeholder="E-mail"
      />
      <input
        type="message"
        name="message"
        class="contact-form__input contact-form__input--message"
        placeholder="message"
      />
      <input
        type="tel"
        name="phone"
        class="contact-form__input contact-form__input--tel"
        placeholder="phone number"
      />
      <input
        type="text"
        name="fullName"
        class="contact-form__input contact-form__input--name"
        placeholder="Your name"
      />
      <button class="contact-form__button">SEND</button>
    </form>

    <script>
      const button = document.querySelector(".contact-form__button");

      const sendEmail = (e) => {
        e.preventDefault();

        const emailInput = document.querySelector(
          ".contact-form__input--email"
        );
        const messageInput = document.querySelector(
          ".contact-form__input--message"
        );
        const phoneInput = document.querySelector(".contact-form__input--tel");
        const nameInput = document.querySelector(".contact-form__input--name");

        const email = emailInput.value;
        const message = messageInput.value;
        const phone = phoneInput.value;
        const fullName = nameInput.value;

        console.log("EMAIL!", email, message, phone, fullName);
        fetch(
          `/message?message=${message}&email=${email}&phone=${phone}&fullName=${fullName}`
        )
          .then((response) => {
            if (response.status !== 200) throw new Error();
            alert("Message sent!");
          })
          .catch(() => alert("Somthing went wrong!"));
      };

      button.addEventListener("click", sendEmail);
    </script>
  </body>
</html>
